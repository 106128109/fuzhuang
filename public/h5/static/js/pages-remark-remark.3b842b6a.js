(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-remark-remark"],{1033:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={faNavbar:i("794d").default,uForm:i("ae1d").default,uFormItem:i("9a14").default,uRate:i("cc99").default,uInput:i("b5ca").default,uUpload:i("7248c").default,uButton:i("2c0f").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("fa-navbar",{attrs:{title:"评价","border-bottom":!1}}),i("v-uni-view",{staticClass:"u-p-30"},[t.showForm?i("v-uni-view",{},[i("u-form",{ref:"uForm",attrs:{model:t.form}},t._l(t.order_goods,(function(e,n){return i("v-uni-view",{key:n,staticClass:"item"},[i("v-uni-view",{staticClass:"goods"},[i("v-uni-view",{staticClass:"left"},[i("v-uni-image",{attrs:{src:e.image,mode:"aspectFill"}})],1),i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"title u-line-2"},[t._v(t._s(e.title))]),i("v-uni-view",{staticClass:"type u-line-2"},[t._v(t._s(e.attrdata||""))]),i("u-form-item",{staticStyle:{padding:"0"},attrs:{"border-bottom":!1,prop:"star__"+n}},[i("u-rate",{attrs:{count:t.count},model:{value:t.form["star__"+n],callback:function(e){t.$set(t.form,"star__"+n,e)},expression:"form['star__' + index]"}})],1)],1)],1),i("v-uni-view",{},[i("u-form-item",{staticStyle:{padding:"0"},attrs:{"label-position":"top","border-bottom":!1,prop:"content__"+n}},[i("u-input",{attrs:{type:"textarea",height:"150",maxlength:"150",fixed:!0},model:{value:t.form["content__"+n],callback:function(e){t.$set(t.form,"content__"+n,e)},expression:"form['content__' + index]"}})],1)],1),i("v-uni-view",{staticClass:"u-m-b-30"},[i("u-upload",{ref:"uUpload",refInFor:!0,attrs:{width:"150",height:"150",action:t.uploadurl,header:t.header,"form-data":t.formdata,index:n},on:{"on-uploaded":function(e){arguments[0]=e=t.$handleEvent(e),t.onUploaded.apply(void 0,arguments)},"on-remove":function(e){arguments[0]=e=t.$handleEvent(e),t.onRemove.apply(void 0,arguments)}}})],1)],1)})),1)],1):t._e()],1),i("v-uni-view",{staticClass:"u-p-60"},[i("u-button",{attrs:{type:"primary","hover-class":"none","custom-style":{backgroundColor:t.theme.bgColor,color:t.theme.color},shape:"circle"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("立即提交")])],1)],1)},o=[]},"4b83":function(t,e,i){"use strict";i.r(e);var n=i("61aa"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a},"4c30":function(t,e,i){var n=i("caf4");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("9bc8bbc0",n,!0,{sourceMap:!1,shadowMode:!1})},"4fad":function(t,e,i){var n=i("23e7"),a=i("6f53").entries;n({target:"Object",stat:!0},{entries:function(t){return a(t)}})},"61aa":function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("4de4"),i("4160"),i("caad"),i("d81d"),i("4fad"),i("ac1f"),i("1276"),i("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("3835")),o={onLoad:function(t){this.order_sn=t.order_sn||"",this.getDetail()},computed:{header:function(){return{token:this.vuex_token||"",uid:this.vuex_user.id||0}},formdata:function(){var t=this.vuex_config.config&&this.vuex_config.config.upload.multipart||"",e=this.$u.test.object(t);return e?this.vuex_config.config.upload.multipart:{}},uploadurl:function(){return this.vuex_config.upload?this.vuex_config.upload.uploadurl:""}},data:function(){return{showForm:!1,form:{},rules:{},count:5,order_sn:"",info:{},order_goods:[]}},methods:{getDetail:function(){var t=this;this.$api.orderDetail({order_sn:this.order_sn}).then((function(e){if(e.code){t.info=e.data,t.order_goods=e.data.order_goods.filter((function(t){return[0,6].includes(t.salestate)}));var i={},n={};t.order_goods.forEach((function(t,e){i["star__"+e]=5,i["content__"+e]="",i["images__"+e]="",i["goods_id__"+e]=t.goods_id,n["content__"+e]=[{required:!0,message:"请输入评论内容",trigger:["change","blur"]},{min:5,message:"评论不能少于5个字",trigger:"change"}]})),t.form=i,t.rules=n,t.showForm=!0,t.$nextTick((function(){t.$refs.uForm.setRules(t.rules)}))}}))},onUploaded:function(t,e){this.form["images__"+e]=t.map((function(t){return t.response.data.url})).join(",")},onRemove:function(t,e,i){this.form["images__"+i]=e.map((function(t){return t.response.data.url})).join(",")},submit:function(){var t=this;this.$refs.uForm.validate((function(e){if(e){if(!t.order_sn)return void t.$u.toast("参数缺失！");for(var i={order_sn:t.order_sn},n=[],o=0,r=Object.entries(t.form);o<r.length;o++){var s=(0,a.default)(r[o],2),u=s[0],c=s[1],d=u.split("__");void 0==n[d[1]]&&n.push({content:"",goods_id:"",star:5,images:""}),n[d[1]][d[0]]=c}i.remark=n,t.$api.commentAdd(i).then((function(e){t.$u.toast(e.msg),1==e.code&&setTimeout((function(){uni.$u.route({type:"back"})}),1e3)}))}}))}}};e.default=o}).call(this,i("0de9")["log"])},8341:function(t,e,i){"use strict";var n=i("4c30"),a=i.n(n);a.a},"874c":function(t,e,i){"use strict";i("a9e3"),i("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"u-rate",props:{value:{type:[Number,String],default:-1},count:{type:[Number,String],default:5},current:{type:[Number,String],default:0},disabled:{type:Boolean,default:!1},size:{type:[Number,String],default:32},inactiveColor:{type:String,default:"#b2b2b2"},activeColor:{type:String,default:"#FA3534"},gutter:{type:[Number,String],default:10},minCount:{type:[Number,String],default:0},allowHalf:{type:Boolean,default:!1},activeIcon:{type:String,default:"star-fill"},inactiveIcon:{type:String,default:"star"},customPrefix:{type:String,default:"uicon"},colors:{type:Array,default:function(){return[]}},icons:{type:Array,default:function(){return[]}}},data:function(){return{elId:this.$u.guid(),elClass:this.$u.guid(),starBoxLeft:0,activeIndex:-1!=this.value?this.value:this.current,starWidth:0,starWidthArr:[]}},watch:{current:function(t){this.activeIndex=t},value:function(t){this.activeIndex=t}},computed:{decimal:function(){return this.disabled?100*this.activeIndex%100:this.allowHalf?50:void 0},elActiveIcon:function(){var t=this.icons.length;if(t&&t<=this.count){var e=Math.round(this.activeIndex/Math.round(this.count/t));return e<1?this.icons[0]:e>t?this.icons[t-1]:this.icons[e-1]}return this.activeIcon},elActiveColor:function(){var t=this.colors.length;if(t&&t<=this.count){var e=Math.round(this.activeIndex/Math.round(this.count/t));return e<1?this.colors[0]:e>t?this.colors[t-1]:this.colors[e-1]}return this.activeColor}},methods:{getElRectById:function(){var t=this;this.$uGetRect("#"+this.elId).then((function(e){t.starBoxLeft=e.left}))},getElRectByClass:function(){var t=this;this.$uGetRect("."+this.elClass).then((function(e){t.starWidth=e.width;for(var i=0;i<t.count;i++)t.starWidthArr[i]=(i+1)*t.starWidth}))},touchMove:function(t){if(!this.disabled&&t.changedTouches[0]){var e=t.changedTouches[0].pageX,i=e-this.starBoxLeft;i<=0&&(this.activeIndex=0);var n=Math.ceil(i/this.starWidth);this.activeIndex=n>this.count?this.count:n,this.activeIndex<this.minCount&&(this.activeIndex=this.minCount),this.emitEvent()}},click:function(t,e){this.disabled||(this.allowHalf,1==t?1==this.activeIndex?this.activeIndex=0:this.activeIndex=1:this.activeIndex=t,this.activeIndex<this.minCount&&(this.activeIndex=this.minCount),this.emitEvent())},emitEvent:function(){this.$emit("change",this.activeIndex),-1!=this.value&&this.$emit("input",this.activeIndex)},showDecimalIcon:function(t){return this.disabled&&parseInt(this.activeIndex)===t}},mounted:function(){this.getElRectById(),this.getElRectByClass()}};e.default=n},9798:function(t,e,i){"use strict";i.r(e);var n=i("1033"),a=i("4b83");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("8341");var r,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"768aa688",null,!1,n["a"],r);e["default"]=u.exports},ace7:function(t,e,i){"use strict";var n=i("b579"),a=i.n(n);a.a},b579:function(t,e,i){var n=i("c199");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("4a85ffff",n,!0,{sourceMap:!1,shadowMode:!1})},c199:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.u-rate[data-v-43f1319a]{display:-webkit-inline-flex;display:inline-flex;align-items:center;margin:0;padding:0}.u-icon[data-v-43f1319a]{box-sizing:border-box}',""]),t.exports=e},caf4:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,'@charset "UTF-8";\n/**\n * 下方引入的为uView UI的集成样式文件，为scss预处理器，其中包含了一些"u-"开头的自定义变量\n * uView自定义的css类名和scss变量，均以"u-"开头，不会造成冲突，请放心使用 \n */.item[data-v-768aa688]{border-bottom:1px solid #f4f4f6}.item .goods[data-v-768aa688]{display:flex;padding:%?20?% 0;border-bottom:1px solid #f4f6f8;justify-content:space-between}.item .goods .left[data-v-768aa688]{margin-right:%?20?%}.item .goods .left uni-image[data-v-768aa688]{width:%?200?%;height:%?150?%;border-radius:%?10?%}.item .goods .content[data-v-768aa688]{flex:1}.item .goods .content .title[data-v-768aa688]{font-size:%?28?%;line-height:%?40?%}.item .goods .content .type[data-v-768aa688]{margin-top:%?10?%;font-size:%?24?%;color:#909399}',""]),t.exports=e},cc99:function(t,e,i){"use strict";i.r(e);var n=i("d02b"),a=i("d615");for(var o in a)"default"!==o&&function(t){i.d(e,t,(function(){return a[t]}))}(o);i("ace7");var r,s=i("f0c5"),u=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"43f1319a",null,!1,n["a"],r);e["default"]=u.exports},d02b:function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n}));var n={uIcon:i("22f6").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"u-rate",attrs:{id:t.elId},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.touchMove.apply(void 0,arguments)}}},t._l(t.count,(function(e,n){return i("v-uni-view",{key:n,staticClass:"u-star-wrap",class:[t.elClass]},[i("u-icon",{attrs:{name:t.activeIndex>n?t.elActiveIcon:t.inactiveIcon,color:t.activeIndex>n?t.elActiveColor:t.inactiveColor,"custom-style":{fontSize:t.size+"rpx",padding:"0 "+t.gutter/2+"rpx"},"custom-prefix":t.customPrefix,"show-decimal-icon":t.showDecimalIcon(n),percent:t.decimal,"inactive-color":t.inactiveColor},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.click(n+1,e)}}})],1)})),1)},o=[]},d615:function(t,e,i){"use strict";i.r(e);var n=i("874c"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,(function(){return n[t]}))}(o);e["default"]=a.a}}]);